{"version":3,"sources":["logic/gameBoard.ts","logic/ship.ts","components/BoardCell.tsx","components/SunkShipIndicators.tsx","components/GameBoardDisplay.tsx","components/GameEndMessage.tsx","components/GithubFooter.tsx","components/DraggableShip.tsx","components/ShipPlacementMenu.tsx","components/StatusText.tsx","logic/player.ts","App.tsx","index.jsx"],"names":["CellState","GameBoard","cells","nextShipPlacement","isNextShipPlacementValid","haveAllShipsSunk","ships","sunkShipsInfo","_arePositionsLocked","makeAutoObservable","this","initializeBoard","Array","from","length","map","row","column","empty","shipPlacement","Error","ship","direction","isShipWithinBoardEdges","size","wouldShipsBeInContact","newCellPositions","predictCellsInShip","shipToPlace","cellPositions","setStateOfCells","shipIntact","push","quantity","sunk","states","positions","cellState","includes","position","attackedShip","findShipAt","shipHit","missed","attackedCell","find","shipCellPos","attackedIndex","indexOf","hit","isSunk","handleSunkShip","every","hits","forEach","sunkPos","shipSunk","knownCellPositions","getAdjacentCellPositions","getCornerCellPositions","filter","pos","undefined","knownEmpty","shipToRemove","shipToRotate","cellsBeforeRotation","newDirection","newShipPlacement","originPosition","prepareToPlaceShip","placeShip","some","cellPos","proposedPlacement","proposedCells","cell","getSurroundingCellStates","state","surroundingStates","checkedRow","checkedColumn","isValidColumn","cellsInRow","targetCell","surrounding","existsRowBefore","existsRowAfter","existsColumnBefore","existsColumnAfter","i","newState","Ship","initSize","_cellPositions","_originPosition","initializeHits","x","index","newPositions","reduce","origin","Math","min","observer","owner","cellRef","useRef","board","getCellPositionFromIndex","floor","handleShipDrop","event","placement","detail","useEffect","current","addEventListener","ref","className","style","type","arePositionsLocked","opponent","setCellStyle","onClick","attack","removeShipAt","key","shipSize","parseInt","info","_","isGameOver","isPlayerTurn","setStyle","flat","loser","players","player","id","window","location","reload","GithubFooter","icon","faHeart","color","href","DraggableShip","display","nodeRef","useState","isDragging","setIsDragging","setZIndex","value","zIndex","toString","defaultPosition","y","scale","onStart","onStop","e","document","elementsFromPoint","el","classList","contains","dispatchEvent","CustomEvent","flexDirection","calculateBorderStyles","faArrowsAlt","cellIndex","borderRight","borderBottom","user","setDirection","clear","faSyncAlt","placeRandomShips","faDice","faArrowsAltH","faArrowsAltV","marginTop","lockShipsInPlace","faPlay","numberOfShipsWithSize","status","hasExtraTurn","getStatus","Player","autoAttackDelay","clearFirst","shipsToPlace","repeat","random","unconstrainedPosition","constrainedPosition","receiveAttack","autoAttack","setTimeout","makeSmartMove","opponentBoard","hitPositions","findCellsWithState","extendedPositions","shuffle","hitPos","getAdjacentCellStates","adjacentIndex","unhitPos","adjacentPositions","getCornerCellStates","attackRandomCell","freeCellPositions","adj","corner","randomCellIndex","human","cpu","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.810ff159.chunk.js","sourcesContent":["import Ship from './ship';\r\nimport { makeAutoObservable } from 'mobx';\r\n\r\ntype CellField = CellState[][];\r\n\r\nenum CellState {\r\n  empty,\r\n  missed,\r\n  shipIntact,\r\n  shipHit,\r\n  shipSunk,\r\n  knownEmpty\r\n}\r\n\r\nexport type ShipPlacement = {\r\n  ship: Ship, \r\n  direction: 'horizontal' | 'vertical', \r\n  row: number, \r\n  column: number\r\n} | null\r\n\r\nexport type SunkShipsInfo = {\r\n  [key: number]: { quantity: number, sunk: number }\r\n}\r\n\r\nclass GameBoard {\r\n  public cells: CellField;\r\n  public nextShipPlacement: ShipPlacement = null;\r\n  public isNextShipPlacementValid = false;\r\n  public haveAllShipsSunk = false;\r\n  public ships: Ship[] = [];\r\n  public sunkShipsInfo: SunkShipsInfo = {}\r\n  private _arePositionsLocked = false;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n    this.cells = this.initializeBoard();\r\n  }\r\n\r\n  private initializeBoard() {\r\n    return (\r\n      Array.from({ length: 10 }).map(row => {\r\n        return Array.from({ length: 10 }).map(column => CellState.empty)\r\n      })\r\n    )\r\n  }\r\n\r\n  public clear() {\r\n    this.ships = [];\r\n    this.nextShipPlacement = null;\r\n    this.haveAllShipsSunk = false;\r\n    this.sunkShipsInfo = {};\r\n    this.cells = this.initializeBoard();\r\n  }\r\n\r\n  public prepareToPlaceShip(shipPlacement: ShipPlacement) {\r\n    if (!shipPlacement) throw new Error(\"No ship placement provided.\");\r\n\r\n    const { ship, direction, row, column } = shipPlacement;\r\n    const startPoint = direction === 'horizontal' ? column : row;\r\n    const isShipWithinBoardEdges = row >= 0 && column >= 0 && startPoint + ship.size <= 10;\r\n    this.isNextShipPlacementValid = isShipWithinBoardEdges && !this.wouldShipsBeInContact(shipPlacement);\r\n    this.nextShipPlacement = shipPlacement;\r\n  }\r\n\r\n  public placeShip() {\r\n    if (!this.nextShipPlacement) {\r\n      throw new Error(\"Can't place ship as there isn't one ready to place.\");\r\n    }\r\n    if (!this.isNextShipPlacementValid) {\r\n      return;\r\n    }\r\n\r\n    const size = this.nextShipPlacement.ship.size;\r\n\r\n    const newCellPositions = this.predictCellsInShip(this.nextShipPlacement);\r\n    const shipToPlace = this.nextShipPlacement.ship;\r\n    shipToPlace.cellPositions = newCellPositions;\r\n    shipToPlace.direction = this.nextShipPlacement.direction;\r\n\r\n    this.setStateOfCells(newCellPositions, CellState.shipIntact);\r\n    \r\n    this.ships.push(shipToPlace);\r\n    this.isNextShipPlacementValid = false;\r\n    this.nextShipPlacement = null;\r\n\r\n    this.sunkShipsInfo[size] = {\r\n      quantity: this.sunkShipsInfo[size] ? this.sunkShipsInfo[size].quantity + 1 : 1,\r\n      sunk: 0\r\n    };\r\n  }\r\n\r\n  public lockShipsInPlace() {\r\n    this._arePositionsLocked = true;\r\n  }\r\n\r\n  public findCellsWithState(states: CellState[]) {\r\n    const positions: [number, number][] = [];\r\n    for (let row = 0; row < 10; row++) {\r\n      for (let column = 0; column < 10; column++) {\r\n        const cellState = this.cells[row][column];\r\n        if (states.includes(cellState)) {\r\n          positions.push([row, column]);\r\n        }\r\n      }\r\n    }\r\n    return positions;\r\n  }\r\n\r\n  public receiveAttack(position: [number, number]) {\r\n    const attackedShip = this.findShipAt(position);\r\n    this.setStateOfCells([position], attackedShip ? CellState.shipHit : CellState.missed);\r\n\r\n    if (attackedShip) {\r\n      const attackedCell = attackedShip.cellPositions.find(shipCellPos => (\r\n        shipCellPos[0] === position[0] && shipCellPos[1] === position[1]\r\n      ));\r\n\r\n      if (!attackedCell) {\r\n        throw new Error('Hmm... a ship was attacked but its attacked cell cannot be found.');\r\n      } \r\n\r\n      const attackedIndex = attackedShip.cellPositions.indexOf(attackedCell);\r\n      attackedShip.hit(attackedIndex);\r\n      if (attackedShip.isSunk) {\r\n        this.handleSunkShip(attackedShip);\r\n      }\r\n      this.haveAllShipsSunk = this.ships.every(ship => ship.hits.every(hit => hit === 'hit'));\r\n    }\r\n  }\r\n\r\n  private handleSunkShip(attackedShip: Ship) {\r\n    attackedShip.cellPositions.forEach(sunkPos => {\r\n      this.cells[sunkPos[0]][sunkPos[1]] = CellState.shipSunk;\r\n      let knownCellPositions = \r\n        [...this.getAdjacentCellPositions(sunkPos), ...this.getCornerCellPositions(sunkPos)]\r\n          .filter((pos): pos is [number, number] => pos !== undefined)\r\n          .filter(pos => {\r\n            let cellState = this.cells[pos[0]][pos[1]];\r\n            return cellState === CellState.empty;\r\n          });\r\n      this.setStateOfCells(knownCellPositions, CellState.knownEmpty);\r\n    });\r\n\r\n    this.sunkShipsInfo[attackedShip.size].sunk += 1;\r\n  }\r\n\r\n  public removeShipAt(position: [number, number]) {\r\n    const shipToRemove = this.findShipAt(position);\r\n    if (!shipToRemove) return;\r\n\r\n    this.setStateOfCells(shipToRemove.cellPositions, CellState.empty);\r\n    this.ships = this.ships.filter(ship => ship !== shipToRemove);\r\n    this.sunkShipsInfo[shipToRemove.size].quantity -= 1;\r\n  }\r\n\r\n  public rotateShipAt(position: [number, number]) {\r\n    const shipToRotate = this.findShipAt(position); \r\n\r\n    if (!shipToRotate) {\r\n      throw new Error(`Can't rotate. No ship found at (${position[0]}, ${position[1]}).`);\r\n    }\r\n\r\n    const cellsBeforeRotation = shipToRotate.cellPositions;\r\n    this.setStateOfCells(cellsBeforeRotation, CellState.empty);\r\n\r\n    const newDirection = shipToRotate.direction === 'horizontal' ? 'vertical' : 'horizontal';\r\n\r\n    const newShipPlacement: ShipPlacement = { \r\n      ship: shipToRotate, \r\n      direction: newDirection,\r\n      row: shipToRotate.originPosition[0],\r\n      column: shipToRotate.originPosition[1]\r\n    }\r\n    this.prepareToPlaceShip(newShipPlacement);\r\n\r\n    if (this.isNextShipPlacementValid) {\r\n      shipToRotate.direction = newDirection;\r\n      this.ships = this.ships.filter(ship => ship !== shipToRotate);\r\n      this.placeShip();\r\n    } else {\r\n      this.setStateOfCells(cellsBeforeRotation, CellState.shipIntact);\r\n    }\r\n  }\r\n\r\n  private findShipAt(position: [number, number]) {\r\n    return this.ships.find(ship => (\r\n      ship.cellPositions.some(cellPos => (cellPos[0] === position[0] && cellPos[1] === position[1]))\r\n    ));\r\n  }\r\n\r\n  private wouldShipsBeInContact(proposedPlacement: ShipPlacement) {\r\n    const proposedCells = this.predictCellsInShip(proposedPlacement);\r\n\r\n    for (const cell of proposedCells) {\r\n      const surroundingCellStates = this.getSurroundingCellStates(cell).filter(state => state !== undefined);\r\n      const isContact = !surroundingCellStates.every(state => state === CellState.empty);\r\n      if (isContact) return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  public getSurroundingCellStates(position: [number, number]) {\r\n    const row = position[0];\r\n    const column = position[1];\r\n    const surroundingStates: (CellState | undefined)[] = [];\r\n\r\n    for (let checkedRow = row - 1; checkedRow <= row + 1; checkedRow++) {\r\n      for (let checkedColumn = column - 1; checkedColumn <= column + 1; checkedColumn++) {\r\n        const isValidRow = checkedRow >= 0 && checkedRow <= 9;\r\n        const isValidColumn = checkedColumn >= 0 && checkedColumn <= 9;\r\n        const cellsInRow = isValidRow ? this.cells[checkedRow] : undefined;\r\n        const targetCell = cellsInRow ? (isValidColumn ? cellsInRow[checkedColumn] : undefined) : undefined;\r\n        surroundingStates.push(targetCell);\r\n      }\r\n    }\r\n\r\n    return surroundingStates;\r\n  }\r\n\r\n  public getCornerCellStates(position: [number, number]) {\r\n    const surrounding = this.getSurroundingCellStates(position);\r\n    return [surrounding[0], surrounding[2], surrounding[6], surrounding[8]];\r\n  }\r\n\r\n  public getAdjacentCellStates(position: [number, number]) {\r\n    const surrounding = this.getSurroundingCellStates(position);\r\n    return [surrounding[1], surrounding[3], surrounding[5], surrounding[7]];\r\n  }\r\n\r\n  private getCornerCellPositions(position: [number, number]): ([number, number] | undefined)[] {\r\n    const existsRowBefore = position[0] - 1 >= 0;\r\n    const existsRowAfter = position[0] + 1 <= 9;\r\n    const existsColumnBefore = position[1] - 1 >= 0;\r\n    const existsColumnAfter = position[1] + 1 <= 9;\r\n    return [\r\n      existsRowBefore && existsColumnBefore ? [position[0] - 1, position[1] - 1] : undefined,\r\n      existsRowBefore && existsColumnAfter ? [position[0] - 1, position[1] + 1] : undefined,\r\n      existsRowAfter && existsColumnBefore ? [position[0] + 1, position[1] - 1] : undefined,\r\n      existsRowAfter && existsColumnAfter ? [position[0] + 1, position[1] + 1] : undefined\r\n    ];\r\n  }\r\n\r\n  public getAdjacentCellPositions(position: [number, number]): ([number, number] | undefined)[] {\r\n    return [\r\n      position[0] - 1 >= 0 ? [position[0] - 1, position[1]] : undefined,\r\n      position[1] - 1 >= 0 ? [position[0], position[1] - 1] : undefined,\r\n      position[1] + 1 <= 9 ? [position[0], position[1] + 1] : undefined,\r\n      position[0] + 1 <= 9 ? [position[0] + 1, position[1]] : undefined,\r\n    ];\r\n  }\r\n\r\n  private predictCellsInShip(shipPlacement: ShipPlacement) {\r\n    if (!shipPlacement) throw new Error(\"No ship placement provided.\");\r\n    const { ship, direction, row, column } = shipPlacement;\r\n\r\n    let positions: [number, number][] = []\r\n\r\n    for (let i = 0; i < ship.size; i++) {\r\n      if (direction === 'horizontal') {\r\n        positions.push([row, column + i]);\r\n      } else if (direction === 'vertical') {\r\n        positions.push([row + i, column]);\r\n      }\r\n    }\r\n\r\n    return positions;\r\n  }\r\n\r\n  private setStateOfCells(positions: [number, number][], newState: CellState) {\r\n    positions.forEach(pos => this.cells[pos[0]][pos[1]] = newState);\r\n  }\r\n\r\n  public get arePositionsLocked() { return this._arePositionsLocked; }\r\n\r\n  public numberOfShipsWithSize(size: number) { \r\n    return this.ships.filter(ship => ship.size === size).length;\r\n  }\r\n}\r\n\r\nexport { CellState, GameBoard };","type HitState = 'intact' | 'hit';\r\n\r\nclass Ship {\r\n  public size;\r\n  public hits: HitState[];\r\n  public isSunk = false;\r\n  public direction: 'horizontal' | 'vertical' = 'horizontal';\r\n  private _cellPositions: [number, number][] = [];\r\n  private _originPosition: [number, number] = [-1, -1];\r\n\r\n  constructor(initSize: number) {\r\n    this.size = initSize;\r\n    this.hits = this.initializeHits();\r\n  }\r\n\r\n  public get cellPositions() { return this._cellPositions; }\r\n  public set cellPositions(newPositions: [number, number][]) {\r\n    this._cellPositions = newPositions;\r\n    this._originPosition = newPositions.reduce((origin, position) => {\r\n      return [Math.min(origin[0], position[0]), Math.min(origin[1], position[1])];\r\n    }, [10, 10]);\r\n  }\r\n\r\n  public get originPosition() { return this._originPosition; }\r\n\r\n  private initializeHits() {\r\n    return Array.from({ length: this.size }).map(x => 'intact' as HitState);\r\n  }\r\n\r\n  public hit(index: number) {\r\n    this.hits[index] = 'hit';\r\n    this.isSunk = this.hits.every(state => state === 'hit');\r\n  }\r\n}\r\n\r\nexport default Ship;","import { observer } from 'mobx-react-lite';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { CellState, ShipPlacement } from '../logic/gameBoard';\r\nimport Player from '../logic/player';\r\nimport Ship from '../logic/ship';\r\nimport '../styles/BoardCell.css';\r\n\r\ninterface Props {\r\n  cell: CellState;\r\n  owner: Player;\r\n  index: number;\r\n}\r\n\r\nconst BoardCell: React.FC<Props> = ({ cell, owner, index }) => {\r\n  const cellRef: any = useRef(null);\r\n  const board = owner.board;\r\n\r\n  useEffect(() => {\r\n    if (cellRef.current) {\r\n      cellRef.current.addEventListener('shipDrop', handleShipDrop);\r\n    }\r\n  }, []);\r\n\r\n  function getCellPositionFromIndex() {\r\n    const row = Math.floor(index / 10);\r\n    const column = index % 10;\r\n    return [row, column];\r\n  }\r\n\r\n  function handleShipDrop(event: CustomEvent) {\r\n    const [row, column] = getCellPositionFromIndex();\r\n    const ship = new Ship(event.detail.size);\r\n    const direction = event.detail.direction;\r\n    const placement: ShipPlacement = { ship, direction, row, column };\r\n    board.prepareToPlaceShip(placement);\r\n    if (board.isNextShipPlacementValid) {\r\n      board.placeShip();\r\n    }\r\n  }\r\n\r\n  function handleClickCell() {\r\n    const [row, column] = getCellPositionFromIndex();\r\n\r\n    if (board.arePositionsLocked) {\r\n      owner.opponent?.attack([row, column]);\r\n    } else {\r\n      if (board.cells[row][column] === CellState.shipIntact) {\r\n        board.removeShipAt([row, column]);\r\n      }\r\n    }\r\n  }\r\n\r\n  function setCellStyle(cellState: CellState) {\r\n    let style = '';\r\n    const stateStyles = ['', 'cell-missed', '', 'cell-hit', 'cell-sunk', 'cell-known-empty'];\r\n    style = stateStyles[cellState];\r\n  \r\n    if (owner.type === 'human') {\r\n      if (cellState === CellState.shipIntact) {\r\n        style += ' cell-user';\r\n        if (!board.arePositionsLocked) {\r\n          style += ' cell-removeable';\r\n        }\r\n      }\r\n      if (board.arePositionsLocked) {\r\n        style += ' cell-uninteractable';\r\n      }\r\n    }\r\n    else {\r\n      if (cellState !== CellState.empty && cellState !== CellState.shipIntact) {\r\n        style += ' cell-uninteractable';\r\n      } else if (cellState === CellState.shipIntact) {\r\n        if (board.haveAllShipsSunk || owner.opponent?.board.haveAllShipsSunk) {\r\n          style += ' cell-user';\r\n        }\r\n      }\r\n    }\r\n\r\n    if (index === 0) style += ' cell-top-left';\r\n    else if (index === 9) style += ' cell-top-right';\r\n    else if (index === 90) style += ' cell-bottom-left';\r\n    else if (index === 99) style += ' cell-bottom-right';\r\n\r\n    if (owner.type === 'cpu') style += ' cell-hoverable';\r\n    \r\n    return style;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={cellRef}\r\n      className={`board-cell ${setCellStyle(cell)}`}\r\n      onClick={handleClickCell}\r\n    />\r\n  )\r\n}\r\n\r\nexport default observer(BoardCell);","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { GameBoard } from '../logic/gameBoard';\r\nimport '../styles/SunkShipIndicators.css';\r\n\r\nconst SunkShipIndicators: React.FC<{ board: GameBoard }> = ({ board }) => {\r\n  let sunkShipsInfo: {shipSize: number, quantity: number, sunk: number}[] = [];\r\n\r\n  for (const key in board.sunkShipsInfo) {\r\n    sunkShipsInfo.push({ \r\n      shipSize: parseInt(key),\r\n      quantity: board.sunkShipsInfo[key].quantity,\r\n      sunk: board.sunkShipsInfo[key].sunk\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"sunk-indicators-container\">\r\n      <div className=\"sunk-ships-indicator-label\">Sunk ships</div>\r\n      {sunkShipsInfo.map(info => (\r\n        <div key={info.shipSize}>\r\n        {Array.from({ length: info.quantity} ).map((_, index) => (\r\n          <span key={index} className=\"sunk-indicator\">\r\n            {Array.from({ length: info.shipSize }).map((_, key) => \r\n              <span \r\n                key={key}\r\n                className={`indicator-cell ${index < info.sunk ? \"indicator-sunk\" : \"indicator-not-sunk\"}`}\r\n              />\r\n            )}\r\n          </span>\r\n        ))}\r\n        </div>\r\n)     )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default observer(SunkShipIndicators);","import React from 'react';\r\nimport '../styles/GameBoardDisplay.css';\r\nimport { observer } from 'mobx-react-lite';\r\nimport Player from '../logic/player';\r\nimport BoardCell from './BoardCell';\r\nimport SunkShipIndicators from './SunkShipIndicators';\r\n\r\nconst GameBoardDisplay: React.FC<{ owner: Player }> = ({ owner }) => {\r\n  const isGameOver = owner.board.haveAllShipsSunk || owner.opponent?.board.haveAllShipsSunk;\r\n  return (\r\n    <div className=\"board-display-container\">\r\n      <div className=\"board-owner-label\">\r\n        {owner.type === 'human' ? 'Your board' : `Opponent's board`}\r\n      </div>\r\n      <div className={`board-grid ${setStyle()}`}>\r\n        {owner.board.cells.flat().map((cell, index) => (\r\n          <BoardCell key={index} cell={cell} owner={owner} index={index}/>\r\n        ))}\r\n      </div>\r\n      {(owner.type === 'cpu' && !isGameOver) && <SunkShipIndicators board={owner.board}/> }\r\n    </div>\r\n  )\r\n\r\n  function setStyle() {\r\n    let style = '';\r\n    if (isGameOver) {\r\n      style += 'disabled-board';\r\n    } else if (owner.isPlayerTurn && owner.board.arePositionsLocked) {\r\n      style += 'dimmed-board disabled-board';\r\n    }\r\n    \r\n    return style;\r\n  }\r\n}\r\n\r\nexport default observer(GameBoardDisplay);","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport Player from '../logic/player';\r\nimport '../styles/GameEndMessage.css';\r\n\r\nconst GameEndMessage: React.FC<{ players: Player[] }> = ({ players }) => {\r\n  const loser = players.find(player => player.board.haveAllShipsSunk);\r\n  if (!loser) return null;\r\n  return (\r\n    <div id=\"end-message-container\">\r\n      {loser.type === 'human' ? \r\n      <>\r\n        <h3>Game over!</h3>\r\n        <p>You fought valiantly, but your digital opponent ultimately prevailed.</p>\r\n      </>\r\n      :\r\n      <>\r\n        <h3>Victory!</h3>\r\n        <p>Congratulations, human.<br/>You are a fine strategist.</p>\r\n      </>}\r\n      <button onClick={() => window.location.reload()} id=\"play-again-button\">Play again</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default observer(GameEndMessage);","import React from 'react';\r\nimport '../styles/GithubFooter.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHeart } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst GithubFooter = () => {\r\n  return (\r\n    <div className=\"footer\">\r\n      <div>by mangonaise</div>\r\n      <FontAwesomeIcon icon={faHeart} color=\"rgb(230, 101, 144)\"/>\r\n      <a href=\"https://github.com/mangonaise/battleship\">github</a>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default GithubFooter;","import React, { MutableRefObject, useRef, useState } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faArrowsAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport '../styles/DraggableShip.css';\r\nimport Draggable from 'react-draggable';\r\n\r\ninterface Props {\r\n  size: number, \r\n  display: boolean, \r\n  direction: 'horizontal' | 'vertical'\r\n}\r\n\r\nconst DraggableShip: React.FC<Props> = ({ size, display, direction }) => {\r\n  // needed for react strict mode\r\n  const nodeRef: MutableRefObject<HTMLDivElement | null> = useRef(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n\r\n  function handleDragStop(e: any) {\r\n    const cell = document.elementsFromPoint(e.x, e.y).find(el => el.classList.contains('board-cell'));\r\n    if (cell) {\r\n      cell.dispatchEvent(new CustomEvent('shipDrop', { 'detail': { size, direction } }));\r\n    }\r\n    setZIndex(0);\r\n    setIsDragging(false);\r\n  }\r\n\r\n  function handleDragStart() {\r\n    setZIndex(1);\r\n    setIsDragging(true);\r\n  }\r\n\r\n  function setZIndex(value: number) {\r\n    if (nodeRef.current) {\r\n      nodeRef.current.style.zIndex = value.toString();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Draggable\r\n        nodeRef={nodeRef}\r\n        defaultPosition={{ x: 0, y: 0 }}\r\n        position={{ x: 0, y: 0 }}\r\n        scale={1}\r\n        onStart={handleDragStart}\r\n        onStop={handleDragStop}>\r\n        <div\r\n          ref={nodeRef}\r\n          className=\"draggable-ship\"\r\n          style={{\r\n            position: isDragging ? 'absolute' : 'relative',\r\n            display: display ? 'inline-flex' : 'none',\r\n            flexDirection: isDragging && direction === 'vertical' ? 'column' : 'row'\r\n          }}>\r\n          {Array.from({ length: size }).map((_, index) => (\r\n            <span\r\n              key={index}\r\n              className={`ship-placer-cell ${index === 0 ? 'draggable-cell' : ''}`}\r\n              style={calculateBorderStyles(size, index)}\r\n              >\r\n              {index === 0 && <FontAwesomeIcon icon={faArrowsAlt} />}\r\n            </span>\r\n          ))}\r\n        </div>\r\n      </Draggable>\r\n    </div>\r\n  )\r\n\r\n  function calculateBorderStyles(shipSize: number, cellIndex: number) {\r\n    let borderRight = '';\r\n    let borderBottom = '';\r\n    if (isDragging && direction === 'vertical') {\r\n      borderBottom = cellIndex < shipSize - 1 ? 'none': '';\r\n    }\r\n    else {\r\n      borderRight = cellIndex < shipSize - 1 ? 'none' : '';\r\n    }\r\n\r\n    return { borderRight, borderBottom };\r\n  }\r\n}\r\n\r\nexport default DraggableShip;","import { faArrowsAltH, faArrowsAltV, faDice, faPlay, faSyncAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React, { useState } from 'react';\r\nimport Player from '../logic/player';\r\nimport '../styles/ShipPlacementMenu.css';\r\nimport DraggableShip from './DraggableShip';\r\n\r\nconst ShipPlacementMenu: React.FC<{ user: Player }> = ({ user }) => {\r\n  const [direction, setDirection] = useState<'horizontal' | 'vertical'>('horizontal');\r\n\r\n  return (\r\n    <div id=\"ship-placer-container\">\r\n      <h3>Place your ships to get started.</h3>\r\n      <button onClick={() => user.board.clear()} className=\"placement-option-button\">\r\n        <FontAwesomeIcon className=\"placement-option-icon\" icon={faSyncAlt} /> Clear board\r\n      </button>\r\n      <button onClick={() => user.placeRandomShips(true)} className=\"placement-option-button\">\r\n        <FontAwesomeIcon className=\"placement-option-icon\" icon={faDice} /> Place randomly\r\n      </button>\r\n      {user.board.ships.length < 10 ? \r\n      <div>\r\n        <div id=\"manual-placement-text\">Drag & drop</div>\r\n        <div className=\"direction-toggle-container\">\r\n          <button\r\n            onClick={() => setDirection('horizontal')}\r\n            className={`placement-direction-button ${direction === 'horizontal' ? 'active-direction-button' : ''}`}>\r\n            <FontAwesomeIcon icon={faArrowsAltH} />\r\n          </button>\r\n          <button\r\n            className={`placement-direction-button ${direction === 'vertical' ? 'active-direction-button' : ''}`}\r\n            onClick={() => setDirection('vertical')}>\r\n            <FontAwesomeIcon icon={faArrowsAltV} />\r\n          </button>\r\n          <p>placing {direction}ly</p>\r\n        </div>\r\n      </div>\r\n      : \r\n      <>\r\n        <h3 style={{marginTop: '10px'}}>Good to go!</h3>\r\n        <button onClick={() => user.board.lockShipsInPlace()} id=\"start-button\" className=\"placement-option-button\">\r\n          <FontAwesomeIcon className=\"placement-option-icon\" icon={faPlay}/> Start game\r\n        </button>\r\n      </>}\r\n\r\n      <div>\r\n        <div className=\"draggable-ship-group\">\r\n          <DraggableShip size={4} display={user.board.numberOfShipsWithSize(4) < 1} direction={direction} />\r\n        </div>\r\n        <div className=\"draggable-ship-group\">\r\n          {Array.from({ length: 2 }).map((_, index) => (\r\n            <DraggableShip key={index} size={3} display={user.board.numberOfShipsWithSize(3) <= index} direction={direction} />\r\n          ))}\r\n        </div>\r\n        <div className=\"draggable-ship-group\">\r\n          {Array.from({ length: 3 }).map((_, index) => (\r\n            <DraggableShip key={index} size={2} display={user.board.numberOfShipsWithSize(2) <= index} direction={direction} />\r\n          ))}\r\n        </div>\r\n        <div className=\"draggable-ship-group\">\r\n          {Array.from({ length: 4 }).map((_, index) => (\r\n            <DraggableShip key={index} size={1} display={user.board.numberOfShipsWithSize(1) <= index} direction={direction} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default observer(ShipPlacementMenu);","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport Player from '../logic/player';\r\n\r\nconst StatusText: React.FC<{ user: Player }> = ({ user }) => {\r\n  return (\r\n    <h1 id=\"game-status\">{getStatus()}</h1>\r\n  )\r\n\r\n  function getStatus() {\r\n    let status = '';\r\n    if (!user.board.arePositionsLocked) {\r\n      status = 'Battleship';\r\n    } else {\r\n      if (user.board.haveAllShipsSunk) {\r\n        status = 'You lose!';\r\n      } else if (user.opponent?.board.haveAllShipsSunk) {\r\n        status = 'You win!';\r\n      } else {\r\n        if (user.isPlayerTurn) {\r\n          status = user.hasExtraTurn ? 'Hit! Extra move' : 'Your move';\r\n        } else if (user.opponent?.isPlayerTurn) {\r\n          status = 'Computer\\'s move';\r\n        }\r\n      }\r\n    }\r\n    \r\n    return status\r\n  }\r\n}\r\n\r\nexport default observer(StatusText);","import { CellState, GameBoard } from \"./gameBoard\";\r\nimport Ship from \"./ship\";\r\nimport repeat from 'lodash/times';\r\nimport shuffle from 'lodash/shuffle';\r\nimport { makeAutoObservable } from \"mobx\";\r\n\r\nclass Player {\r\n  public board: GameBoard;\r\n  public type: 'human' | 'cpu';\r\n  public opponent: Player | null = null;\r\n  public isPlayerTurn = false;\r\n  public hasExtraTurn = false;\r\n  public autoAttackDelay = 0;\r\n\r\n  constructor(type: 'human' | 'cpu' = 'human') {\r\n    makeAutoObservable(this);\r\n    this.board = new GameBoard();\r\n    this.type = type;\r\n    if (this.type === 'cpu') {\r\n      this.placeRandomShips();\r\n      this.board.lockShipsInPlace();\r\n    } else if (this.type === 'human') {\r\n      this.isPlayerTurn = true;\r\n    }\r\n  }\r\n\r\n  public placeRandomShips(clearFirst: boolean = false) {\r\n    if (clearFirst) this.board.clear();\r\n    for (let shipsToPlace = 1; shipsToPlace <= 4; shipsToPlace++) {\r\n      repeat(shipsToPlace, () => {\r\n        const shipSize = 5 - shipsToPlace;\r\n        while(!this.board.isNextShipPlacementValid) {\r\n          const direction = Math.random() < 0.5 ? 'horizontal' : 'vertical';\r\n          const unconstrainedPosition = Math.floor(Math.random() * 10);\r\n          const constrainedPosition = Math.floor(Math.random() * (10 - shipSize));\r\n          const origin = direction === 'horizontal' ?\r\n            [unconstrainedPosition, constrainedPosition]\r\n            : [constrainedPosition, unconstrainedPosition];\r\n          this.board.prepareToPlaceShip({ ship: new Ship(shipSize), direction, row: origin[0], column: origin[1]})\r\n        }\r\n        this.board.placeShip();\r\n      })\r\n    }\r\n  }\r\n\r\n  public attack(position: [number, number]) {\r\n    if (!this.opponent) throw new Error(\"Can't attack as there is no opponent.\");\r\n    if (this.board.haveAllShipsSunk || this.opponent.board.haveAllShipsSunk) return;\r\n    this.opponent.board.receiveAttack(position);\r\n\r\n    if (this.opponent.board.cells[position[0]][position[1]] === CellState.missed) {\r\n      this.isPlayerTurn = false;\r\n      this.opponent.isPlayerTurn = true;\r\n      if (this.opponent.type === 'cpu' && this.opponent.autoAttackDelay > 0) {\r\n        this.opponent.autoAttack();\r\n      }\r\n      this.hasExtraTurn = false;\r\n    }\r\n    else {\r\n      this.hasExtraTurn = true;\r\n      if (this.type === 'cpu' && this.autoAttackDelay > 0) {\r\n        this.autoAttack();\r\n      }\r\n    }\r\n  }\r\n\r\n  private autoAttack() {\r\n    if (!this.opponent) throw new Error(\"Can't auto attack. Opponent not found.\");\r\n    setTimeout(() => this.makeSmartMove(), this.autoAttackDelay * 1000);\r\n  }\r\n\r\n  // TODO: Try refactoring this into a non-monster function?\r\n  public makeSmartMove() {\r\n    if (!this.opponent) return;\r\n    const opponentBoard = this.opponent.board;\r\n    const hitPositions = opponentBoard.findCellsWithState([CellState.shipHit]);\r\n\r\n    if (hitPositions.length === 0) {\r\n      this.attackRandomCell();\r\n      return;\r\n    }\r\n\r\n    if (hitPositions.length === 1) {\r\n      let adjacentPositions = shuffle(\r\n        opponentBoard.getAdjacentCellPositions(hitPositions[0])\r\n        .filter((pos): pos is [number, number] => pos !== undefined)\r\n        .filter(pos => opponentBoard.cells[pos[0]][pos[1]] !== CellState.missed)\r\n        .filter(pos => {\r\n          const cornerStates = opponentBoard.getCornerCellStates(pos);\r\n          return !cornerStates.some(state => state === CellState.shipHit || state === CellState.shipSunk);\r\n        })\r\n      );\r\n      this.attack(adjacentPositions[0]);\r\n      return;\r\n    }\r\n\r\n    let endPositions = shuffle(\r\n      hitPositions.filter(hitPos => {\r\n        const adjacentStates = opponentBoard.getAdjacentCellStates(hitPos);\r\n        return adjacentStates.filter(state => state === CellState.shipHit).length === 1;\r\n      })\r\n    );\r\n\r\n    let extendedPositions: [number, number][] = \r\n      endPositions\r\n        .map(pos => { \r\n          // Finds the position opposite the hit cell.\r\n          const adjacentStates = opponentBoard.getAdjacentCellStates(pos);\r\n          const adjacentIndex = adjacentStates.indexOf(CellState.shipHit);\r\n          if (adjacentIndex === 0) return pos[0] + 1 <= 9 ? [pos[0] + 1, pos[1]] as [number, number] : undefined;\r\n          if (adjacentIndex === 1) return pos[1] + 1 <= 9 ? [pos[0], pos[1] + 1] as [number, number] : undefined;\r\n          if (adjacentIndex === 2) return pos[1] - 1 >= 0 ? [pos[0], pos[1] - 1] as [number, number] : undefined;\r\n          if (adjacentIndex === 3) return pos[0] - 1 >= 0 ? [pos[0] - 1, pos[1]] as [number, number] : undefined;\r\n          return undefined;\r\n        })\r\n        .filter((pos): pos is [number, number] => pos !== undefined)\r\n        .filter(pos => {\r\n          const cellState = opponentBoard.cells[pos[0]][pos[1]];\r\n          return cellState === CellState.empty || cellState === CellState.shipIntact;\r\n        });\r\n\r\n    for (const unhitPos of extendedPositions) {\r\n      const surroundingStates = opponentBoard.getSurroundingCellStates(unhitPos);\r\n      const surroundingHitCells = surroundingStates.filter(state => state === CellState.shipHit || state === CellState.shipSunk);\r\n\r\n      if (surroundingHitCells.length === 1) {\r\n        this.attack(unhitPos);\r\n        return;\r\n      }\r\n    }\r\n\r\n    throw new Error(\"Logic error! Checked either end of hit cells and found no available space to attack.\");\r\n  }\r\n\r\n  private attackRandomCell() {\r\n    const opponentBoard = this.opponent!.board;\r\n    let freeCellPositions = opponentBoard.findCellsWithState([CellState.empty, CellState.shipIntact]);\r\n\r\n    freeCellPositions = freeCellPositions.filter(pos => {\r\n      const adjacentStates = opponentBoard.getAdjacentCellStates(pos);\r\n      if (adjacentStates.some(adj => adj === CellState.shipHit || adj === CellState.shipSunk)) {\r\n        return false;\r\n      }\r\n      const cornerStates = opponentBoard.getCornerCellStates(pos);\r\n      if (cornerStates.some(corner => corner === CellState.shipHit || corner === CellState.shipSunk)) {\r\n        return false;\r\n      }\r\n      return true;\r\n    })\r\n\r\n    if (freeCellPositions.length === 0) {\r\n      throw new Error('No more positions for CPU to check. The game should have ended by now.');\r\n    }\r\n    \r\n    const randomCellIndex = Math.floor(Math.random() * freeCellPositions.length);\r\n    this.attack(freeCellPositions[randomCellIndex]);\r\n  }\r\n}\r\n\r\nexport default Player;","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport GameBoardDisplay from './components/GameBoardDisplay';\r\nimport GameEndMessage from './components/GameEndMessage';\r\nimport GithubFooter from './components/GithubFooter';\r\nimport ShipPlacementMenu from './components/ShipPlacementMenu';\r\nimport StatusText from './components/StatusText';\r\nimport Player from './logic/player';\r\nimport './styles/App.css';\r\n\r\nconst human = new Player('human');\r\nconst cpu = new Player('cpu');\r\ncpu.autoAttackDelay = 1.4;\r\nhuman.opponent = cpu;\r\ncpu.opponent = human;\r\n\r\nconst App = () => {\r\n  return (\r\n    <>\r\n    <StatusText user={human}/>\r\n    <div id=\"app-container\">\r\n      <div id=\"game-container\">\r\n        <GameBoardDisplay owner={human}/>\r\n        {!human.board.arePositionsLocked && <ShipPlacementMenu user={human}/>}\r\n        {human.board.arePositionsLocked && <GameBoardDisplay owner={cpu}/>}\r\n        <GameEndMessage players={[human, cpu]}/>\r\n      </div>\r\n    </div>\r\n    <GithubFooter />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default observer(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}